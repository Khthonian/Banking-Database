CREATE DATABASE IF NOT EXISTS bankdatabase;

-- TABLE SETUP --

CREATE TABLE IF NOT EXISTS customer (
    CustomerID int(11) NOT NULL AUTO_INCREMENT,
    FirstName varchar(150) NOT NULL,
    LastName varchar(150) NOT NULL,
    DateOfBirth date NOT NULL,
    HomeAddress varchar(255) NOT NULL,
    Phone varchar(255) NOT NULL,
    PRIMARY KEY (CustomerID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS account (
    AccountID int(11) NOT NULL AUTO_INCREMENT,
    Balance float(13, 2),
    SortCode varchar(8) NOT NULL DEFAULT '05-00-05',
    CustomerID int(11) NOT NULL,
    PRIMARY KEY (AccountID),
    KEY Balance (Balance),
    FOREIGN KEY (CustomerID) REFERENCES Customer (CustomerID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS loan (
    LoanID int(11) NOT NULL AUTO_INCREMENT,
    LoanAmount float(13, 2) NOT NULL,
    CustomerID int(11) NOT NULL,
    AccountID int(11) NOT NULL,
    PaymentRate float(13, 2) NOT NULL,
    NumberOfMonthlyPayments int(3) NOT NULL,
    FirstPaymentDate date NOT NULL,
    MonthlyDueDate varchar(10) NOT NULL DEFAULT '1st',
    PRIMARY KEY (LoanID),
    FOREIGN KEY (CustomerID) REFERENCES Customer (CustomerID),
    FOREIGN KEY (AccountID) REFERENCES Account (AccountID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS transaction (
    TransactionID int(11) NOT NULL AUTO_INCREMENT,
    TransactionAmount float(13, 2) NOT NULL,
    TransactionType varchar(30) NOT NULL,
    TransactionDate date NOT NULL,
    Reference varchar(50) DEFAULT NULL,
    AccountID int(11) NOT NULL,
    PRIMARY KEY (TransactionID),
    FOREIGN KEY (AccountID) REFERENCES Account (AccountID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- DATA INSERTION --

-- Customer Setup --
INSERT INTO customer (FirstName, LastName, DateOfBirth, HomeAddress, Phone)
VALUES 
('John', 'Smith', '1991-12-13', '87 High Street, Rochester', '07444298763'),
('Geoffrey', 'Pittman', '1962-12-08', '27 Victoria Road, Swindon', '07700900793'),
('Benjamin', 'White', '1967-12-15', '790 Broadway Road, Colchester', '07488803756'),
('Fleur', 'Mayers', '1971-11-01', '49 Park Avenue, Darlington', '07488810564'),
('Avneet', 'Murray', '1994-05-28', '74 Highfield Road, Guildford', '07488810567'), -- 5
('Kennedy', 'Barber', '1999-08-07', '898 Stabley Road, Kingston upon Thames', '07488810564'),
('Belinda', 'Benjamin', '1993-12-07', '768 Victoria Street, Reading', '07837642789'),
('Yara', 'Lambert', '1990-07-20', '35 The Drive, Birmingham', '07458196926'),
('Ivy', 'Houston', '1983-03-20', '35 Kings Road, Edinburgh', '07488803757'),
('Warwick', 'Fulton', '1972-09-08', '96 St. Johns Road, Lincoln', '07488803755'), -- 10
('Christian', 'Hutchinson', '1988-10-28', '22 Seaford Road, Cullachie', '07708382093'),
('Tuesday', 'Nguyen', '1972-10-02', '25 High Street, Three Legged Cross', '07887842394'),
('Patience', 'Jordan', '1980-12-21', '81 Mill Lane, Corran', '07041355712'),
('Fred', 'Barker', '1964-02-06', '22 Chapel Lane, Areley Kings', '07723916581'),
('Theodore', 'Osborne', '1977-09-22', '49 Lincoln Green Lane, Chorlton Lane', '07805486366'), -- 15
('Justine', 'Grant', '1970-08-01', '35 Marcham Road, Boreham', '07807909471'),
('Patience', 'Neel', '1975-09-17', '84 Lammas Street, Grassendale', '07860983143'),
('Dorian', 'Slater', '1979-11-19', '90 St Omers Road, Hobson', '07907967116'),
('Alex', 'Brown', '1981-12-05', '72 North Road, Nether Cerne', '07935477424'),
('Kay', 'Quinn', '1986-12-25', '57 Leicester Road, Backaskaill', '07081707149'), -- 20
('Moira', 'Stephenson', '1988-08-04', '68 Town Lane, South Garth', '07719117545'),
('Calvin', 'Maldonado', '1994-03-11', '63 Sandyhill Road, Fyfield', '07705594968'),
('Morris', 'Chapman', '1995-01-29', '36 Iolaire Road, New Lane', '07967143923'),
('Byron', 'Reese', '1999-12-02', '18 Scrimshire Lane, Ashurstwood', '07716289615'),
('Isaiah', 'Henry', '2002-12-31', '31 Park Terrace, Gillamoor', '07971600627'); -- 25

-- Account Setup --
INSERT INTO account (Balance, SortCode, CustomerID)
VALUES 
(4873.10, '05-00-05', '1'),
(7987.24, '05-01-05', '2'),
(4200.63, '05-10-05', '3'),
(5414.71, '05-00-05', '4'),
(7650.90, '05-01-05', '5'), -- 5
(5655.46, '05-01-05', '6'),
(8070.25, '05-00-05', '7'),
(6626.66, '05-10-05', '8'),
(9681.12, '05-01-05', '9'),
(7480.53, '05-00-05', '10'), -- 10
(6481.48, '05-10-05', '11'),
(6587.45, '05-01-05', '12'),
(30967.15, '05-00-05', '13'),
(56869.26, '05-10-05', '14'),
(852.92, '05-10-05', '15'), -- 15
(6980.25, '05-00-05', '16'),
(3086.34, '05-01-05', '17'),
(951.28, '05-01-05', '18'),
(52392.2, '05-00-05', '19'),
(6856.15, '05-10-05', '20'), -- 20
(212.56, '05-10-05', '21'),
(9015.94, '05-00-05', '22'),
(71254.61, '05-01-05', '23'),
(947.08, '05-00-05', '24'),
(2224.19, '05-10-05', '25'); -- 25

-- Loan Setup --
INSERT INTO loan (LoanAmount, CustomerID, AccountID, PaymentRate, NumberOfMonthlyPayments, FirstPaymentDate, MonthlyDueDate)
VALUES
(683.12, 10, 10, 97.59, 7, '2021-11-23', '23rd'),
(836.90, 5, 5, 38.04, 22, '2021-09-20', '20th'),
(995.88, 17, 17, 110.65, 9, '2021-08-11', '11th'),
(1483.05, 7, 7, 70.62, 21, '2021-07-24', '24th'),
(883.21, 23, 23, 98.13, 9, '2021-11-25', '25th'),
(546.89, 24, 24, 22.79, 24, '2021-12-23', '23rd'),
(342.05, 2, 2, 22.80, 15, '2021-12-31', '31st'),
(1482.18, 20, 20, 296.44, 5, '2021-07-24', '24th'),
(182.98, 1, 1, 8.71, 21, '2021-12-16', '16th'),
(1220.72, 20, 20, 67.82, 18, '2021-01-01', '1st'),
(308.12, 8, 8, 14.01, 22, '2021-01-19', '19th'),
(1020.68, 12, 12, 44.38, 23, '2021-01-30', '30th'),
(228.95, 5, 5, 17.61, 13, '2021-01-18', '18th'),
(151.48, 16, 16, 37.87, 4, '2021-11-22', '22nd'),
(1118.21, 15, 15, 46.59, 24, '2021-06-30', '30th'),
(745.79, 21, 21, 46.61, 16, '2021-04-20', '20th');

-- Transaction Setup --
INSERT INTO transaction (TransactionAmount, TransactionType, TransactionDate, AccountID)
VALUES
(14.43, 'Outgoing', '2021-12-22', 2),
(1099.35, 'Outgoing', '2021-12-19', 18),
(1118.67, 'Outgoing', '2021-12-24', 15),
(1236.27, 'Outgoing', '2021-12-05', 15),
(1004.82, 'Outgoing', '2021-12-12', 4),
(940.85, 'Incoming', '2021-12-07', 12),
(787.83, 'Incoming', '2021-12-18', 11),
(409.56, 'Incoming', '2021-12-13', 18),
(1289.45, 'Incoming', '2021-12-31', 4),
(870.99, 'Outgoing', '2021-12-09', 25),
(1185.12, 'Incoming', '2021-12-28', 6),
(488.73, 'Outgoing', '2021-12-14', 7),
(968.59, 'Incoming', '2021-12-08', 25),
(208.04, 'Incoming', '2021-12-11', 21),
(813.43, 'Outgoing', '2021-12-31', 11),
(1498.73, 'Incoming', '2021-12-04', 11),
(514.15, 'Outgoing', '2021-12-12', 8),
(678.61, 'Incoming', '2021-12-27', 7),
(1158.34, 'Outgoing', '2021-12-21', 8),
(194.88, 'Outgoing', '2021-12-17', 2),
(81.79, 'Incoming', '2021-12-23', 9),
(67.74, 'Outgoing', '2021-12-15', 15),
(1466.42, 'Outgoing', '2021-12-03', 23),
(887.37, 'Outgoing', '2021-12-26', 4),
(324.55, 'Incoming', '2021-12-30', 7),
(202.11, 'Incoming', '2021-12-25', 23),
(614.30, 'Outgoing', '2021-12-14', 4),
(495.40, 'Incoming', '2021-12-21', 11),
(1075.94, 'Incoming', '2021-12-18', 23),
(19.81, 'Incoming', '2021-12-13', 21),
(806.40, 'Outgoing', '2021-12-02', 17),
(808.61, 'Outgoing', '2021-12-13', 24),
(146.93, 'Incoming', '2021-12-12', 15),
(370.51, 'Outgoing', '2021-12-29', 20),
(1479.95, 'Outgoing', '2021-12-23', 25),
(1102.21, 'Incoming', '2021-12-05', 21),
(1223.79, 'Incoming', '2021-12-07', 8),
(155.54, 'Outgoing', '2021-12-14', 2),
(846.34, 'Outgoing', '2021-12-27', 18),
(1392.02, 'Outgoing', '2021-12-18', 18),
(298.69, 'Incoming', '2021-12-29', 20),
(319.68, 'Incoming', '2021-12-14', 24),
(1379.58, 'Incoming', '2021-12-01', 16),
(605.79, 'Outgoing', '2021-12-11', 22),
(572.06, 'Incoming', '2021-12-15', 3),
(240.23, 'Outgoing', '2021-12-01', 9),
(719.82, 'Incoming', '2021-12-24', 21),
(724.85, 'Outgoing', '2021-12-07', 17),
(731.39, 'Incoming', '2021-12-13', 17),
(585.22, 'Outgoing', '2021-12-18', 16),
(1155.08, 'Incoming', '2021-12-16', 5),
(425.52, 'Outgoing', '2021-12-12', 15),
(291.89, 'Incoming', '2021-12-18', 13),
(1267.74, 'Outgoing', '2021-12-21', 5),
(617.59, 'Incoming', '2021-12-03', 7),
(410.53, 'Outgoing', '2021-12-24', 6),
(1239.38, 'Outgoing', '2021-12-31', 17),
(59.40, 'Incoming', '2021-12-20', 17),
(1474.54, 'Outgoing', '2021-12-30', 14),
(191.17, 'Incoming', '2021-12-11', 4),
(572.43, 'Incoming', '2021-12-03', 2),
(22.82, 'Incoming', '2021-12-24', 4),
(596.62, 'Incoming', '2021-12-25', 23),
(1055.81, 'Outgoing', '2021-12-29', 25),
(1071.19, 'Outgoing', '2021-12-12', 18),
(233.47, 'Incoming', '2021-12-15', 18),
(70.93, 'Outgoing', '2021-12-13', 12),
(81.55, 'Incoming', '2021-12-14', 11),
(318.18, 'Outgoing', '2021-12-30', 15),
(1256.30, 'Incoming', '2021-12-19', 17),
(1162.17, 'Incoming', '2021-12-09', 7),
(462.22, 'Incoming', '2021-12-01', 10),
(329.62, 'Outgoing', '2021-12-25', 25),
(289.85, 'Outgoing', '2021-12-04', 7),
(615.27, 'Incoming', '2021-12-12', 7),
(920.41, 'Incoming', '2021-12-22', 13),
(353.49, 'Outgoing', '2021-12-27', 25),
(1363.24, 'Incoming', '2021-12-07', 1),
(1185.04, 'Outgoing', '2021-12-08', 19),
(547.82, 'Incoming', '2021-12-11', 21),
(272.08, 'Incoming', '2021-12-29', 23),
(361.90, 'Outgoing', '2021-12-09', 25),
(541.22, 'Outgoing', '2021-12-21', 4),
(1366.06, 'Outgoing', '2021-12-16', 1),
(779.11, 'Outgoing', '2021-12-05', 10),
(1160.60, 'Outgoing', '2021-12-27', 3),
(1082.83, 'Outgoing', '2021-12-01', 10),
(1482.57, 'Incoming', '2021-12-12', 17),
(1303.74, 'Incoming', '2021-12-05', 19),
(552.10, 'Incoming', '2021-12-08', 14),
(598.08, 'Incoming', '2021-12-26', 7),
(932.01, 'Outgoing', '2021-12-09', 18),
(1364.08, 'Outgoing', '2021-12-14', 4),
(713.32, 'Outgoing', '2021-12-05', 10),
(885.09, 'Outgoing', '2021-12-02', 14),
(1360.43, 'Outgoing', '2021-12-26', 16),
(1260.02, 'Outgoing', '2021-12-08', 11),
(936.90, 'Outgoing', '2021-12-03', 8),
(1478.04, 'Incoming', '2021-12-22', 16),
(972.27, 'Incoming', '2021-12-21', 19),
(1396.95, 'Outgoing', '2021-12-02', 23),
(837.89, 'Incoming', '2021-12-04', 23),
(1279.85, 'Outgoing', '2021-12-14', 10),
(1362.87, 'Outgoing', '2021-12-25', 8),
(1374.10, 'Incoming', '2021-12-04', 17),
(1111.41, 'Incoming', '2021-12-19', 12),
(1124.90, 'Outgoing', '2021-12-27', 11),
(1221.94, 'Incoming', '2021-12-26', 15),
(271.17, 'Incoming', '2021-12-04', 4),
(581.65, 'Outgoing', '2021-12-12', 24),
(1000.08, 'Incoming', '2021-12-27', 20),
(1343.38, 'Incoming', '2021-12-18', 9),
(500.22, 'Incoming', '2021-12-24', 12),
(786.51, 'Incoming', '2021-12-28', 7),
(97.44, 'Incoming', '2021-12-04', 15),
(72.26, 'Incoming', '2021-12-08', 20),
(195.59, 'Outgoing', '2021-12-04', 7),
(927.07, 'Outgoing', '2021-12-17', 15),
(1053.40, 'Outgoing', '2021-12-19', 14),
(312.15, 'Incoming', '2021-12-05', 1),
(1433.20, 'Outgoing', '2021-12-17', 24),
(432.55, 'Outgoing', '2021-12-27', 3),
(260.56, 'Incoming', '2021-12-11', 23),
(1303.98, 'Incoming', '2021-12-25', 1),
(1372.27, 'Incoming', '2021-12-29', 13),
(1092.28, 'Incoming', '2021-12-29', 19),
(477.86, 'Incoming', '2021-12-22', 14),
(954.48, 'Incoming', '2021-12-31', 13),
(791.14, 'Incoming', '2021-12-22', 24),
(612.80, 'Incoming', '2021-12-27', 5),
(1047.76, 'Outgoing', '2021-12-16', 22),
(514.29, 'Outgoing', '2021-12-13', 20),
(299.90, 'Outgoing', '2021-12-06', 15),
(29.07, 'Outgoing', '2021-12-20', 13),
(1144.70, 'Outgoing', '2021-12-28', 4),
(209.65, 'Outgoing', '2021-12-30', 19),
(1077.30, 'Incoming', '2021-12-15', 15),
(116.23, 'Incoming', '2021-12-08', 24),
(110.80, 'Outgoing', '2021-12-30', 12),
(1041.40, 'Outgoing', '2021-12-28', 17),
(934.83, 'Outgoing', '2021-12-23', 6),
(184.39, 'Incoming', '2021-12-18', 3),
(281.14, 'Outgoing', '2021-12-16', 1),
(402.06, 'Outgoing', '2021-12-31', 8),
(1027.99, 'Outgoing', '2021-12-11', 19),
(1222.20, 'Incoming', '2021-12-02', 3),
(1434.63, 'Incoming', '2021-12-23', 12),
(758.81, 'Outgoing', '2021-12-16', 11),
(1066.33, 'Outgoing', '2021-12-01', 5),
(1192.06, 'Outgoing', '2021-12-01', 22),
(1215.59, 'Outgoing', '2021-12-26', 6),
(814.73, 'Incoming', '2021-12-11', 1),
(1436.87, 'Outgoing', '2021-12-03', 13),
(558.36, 'Incoming', '2021-12-07', 11),
(622.47, 'Incoming', '2021-12-23', 20),
(1335.66, 'Incoming', '2021-12-30', 3),
(406.99, 'Outgoing', '2021-12-19', 12),
(130.16, 'Outgoing', '2021-12-30', 3),
(1358.68, 'Incoming', '2021-12-29', 17),
(1252.60, 'Outgoing', '2021-12-20', 11),
(941.33, 'Incoming', '2021-12-04', 12),
(1067.60, 'Outgoing', '2021-12-26', 23),
(1434.79, 'Incoming', '2021-12-16', 16),
(1467.98, 'Incoming', '2021-12-19', 7),
(397.71, 'Incoming', '2021-12-23', 2),
(1461.75, 'Outgoing', '2021-12-15', 21),
(357.34, 'Outgoing', '2021-12-28', 4),
(42.21, 'Outgoing', '2021-12-04', 21),
(1389.37, 'Incoming', '2021-12-11', 3),
(370.92, 'Outgoing', '2021-12-13', 16),
(773.42, 'Incoming', '2021-12-16', 14),
(600.85, 'Incoming', '2021-12-27', 2),
(717.91, 'Outgoing', '2021-12-09', 16),
(427.69, 'Incoming', '2021-12-27', 17),
(703.77, 'Incoming', '2021-12-28', 16),
(769.38, 'Outgoing', '2021-12-20', 10),
(1043.97, 'Incoming', '2021-12-06', 11),
(1204.75, 'Incoming', '2021-12-29', 23),
(854.27, 'Incoming', '2021-12-27', 2),
(153.57, 'Incoming', '2021-12-05', 16),
(220.26, 'Outgoing', '2021-12-29', 13),
(826.50, 'Outgoing', '2021-12-14', 9),
(1419.45, 'Incoming', '2021-12-09', 18),
(536.76, 'Outgoing', '2021-12-18', 25),
(155.12, 'Incoming', '2021-12-14', 18),
(792.52, 'Incoming', '2021-12-26', 16),
(64.60, 'Outgoing', '2021-12-12', 24),
(1383.52, 'Incoming', '2021-12-23', 18),
(881.26, 'Incoming', '2021-12-09', 14),
(1111.36, 'Incoming', '2021-12-31', 9),
(1310.69, 'Incoming', '2021-12-27', 14),
(798.35, 'Incoming', '2021-12-16', 24),
(134.11, 'Outgoing', '2021-12-02', 5),
(842.20, 'Incoming', '2021-12-31', 17),
(387.62, 'Outgoing', '2021-12-09', 25),
(1036.65, 'Outgoing', '2021-12-26', 23),
(1013.54, 'Incoming', '2021-12-06', 23),
(1272.62, 'Incoming', '2021-12-23', 6),
(449.03, 'Incoming', '2021-12-21', 5),
(1097.88, 'Outgoing', '2021-12-23', 6),
(606.22, 'Outgoing', '2021-12-26', 7),
(630.72, 'Incoming', '2021-12-06', 25),
(250.57, 'Incoming', '2021-12-20', 2),
(1329.84, 'Incoming', '2021-12-20', 13),
(347.01, 'Outgoing', '2021-12-12', 1),
(1403.67, 'Incoming', '2021-12-04', 11),
(1456.15, 'Outgoing', '2021-12-05', 18),
(1130.57, 'Outgoing', '2021-12-17', 24),
(1433.86, 'Incoming', '2021-12-22', 10),
(1444.91, 'Incoming', '2021-12-03', 3),
(392.44, 'Outgoing', '2021-12-11', 11),
(268.71, 'Incoming', '2021-12-17', 15),
(691.46, 'Incoming', '2021-12-10', 16),
(1213.35, 'Incoming', '2021-12-19', 7),
(465.96, 'Outgoing', '2021-12-31', 9),
(1477.03, 'Incoming', '2021-12-19', 2),
(156.20, 'Incoming', '2021-12-01', 12),
(331.30, 'Outgoing', '2021-12-01', 12),
(40.30, 'Outgoing', '2021-12-17', 11),
(1469.21, 'Incoming', '2021-12-16', 19),
(818.13, 'Incoming', '2021-12-10', 14),
(66.99, 'Outgoing', '2021-12-07', 5),
(1232.14, 'Incoming', '2021-12-27', 8),
(550.80, 'Outgoing', '2021-12-05', 24),
(1254.29, 'Outgoing', '2021-12-02', 7),
(679.94, 'Incoming', '2021-12-07', 12),
(345.27, 'Incoming', '2021-12-15', 25),
(1352.05, 'Outgoing', '2021-12-12', 14),
(1356.45, 'Incoming', '2021-12-06', 24),
(1441.07, 'Outgoing', '2021-12-31', 12),
(836.86, 'Incoming', '2021-12-26', 19),
(214.81, 'Incoming', '2021-12-30', 10),
(1169.31, 'Incoming', '2021-12-19', 11),
(1138.68, 'Outgoing', '2021-12-06', 25),
(1294.87, 'Incoming', '2021-12-10', 10),
(1075.08, 'Incoming', '2021-12-27', 7),
(1455.39, 'Incoming', '2021-12-06', 12),
(758.30, 'Outgoing', '2021-12-01', 8),
(480.20, 'Incoming', '2021-12-17', 16),
(517.01, 'Outgoing', '2021-12-20', 24),
(1202.92, 'Outgoing', '2021-12-11', 4),
(1463.94, 'Outgoing', '2021-12-14', 21),
(683.99, 'Outgoing', '2021-12-22', 15),
(434.46, 'Outgoing', '2021-12-28', 18),
(309.67, 'Outgoing', '2021-12-09', 13),
(693.13, 'Incoming', '2021-12-09', 7),
(659.63, 'Incoming', '2021-12-04', 4),
(1368.57, 'Incoming', '2021-12-03', 14),
(653.16, 'Incoming', '2021-12-04', 13),
(659.64, 'Outgoing', '2021-12-31', 7),
(652.54, 'Outgoing', '2021-12-27', 4),
(1443.44, 'Outgoing', '2021-12-30', 19),
(1187.67, 'Incoming', '2021-12-25', 12),
(186.12, 'Outgoing', '2021-12-24', 5),
(579.38, 'Outgoing', '2021-12-04', 15),
(1364.43, 'Outgoing', '2021-12-03', 6),
(92.20, 'Incoming', '2021-12-13', 21),
(632.43, 'Outgoing', '2021-12-02', 11),
(59.26, 'Incoming', '2021-12-07', 15),
(1387.17, 'Outgoing', '2021-12-30', 18),
(974.60, 'Incoming', '2021-12-19', 21),
(23.03, 'Incoming', '2021-12-01', 5),
(951.55, 'Outgoing', '2021-12-08', 9),
(1091.29, 'Incoming', '2021-12-13', 10),
(1112.02, 'Outgoing', '2021-12-05', 6),
(283.01, 'Outgoing', '2021-12-05', 5),
(508.56, 'Outgoing', '2021-12-28', 24),
(386.54, 'Outgoing', '2021-12-04', 15),
(1416.33, 'Incoming', '2021-12-17', 14),
(973.41, 'Incoming', '2021-12-05', 4),
(136.20, 'Outgoing', '2021-12-02', 19),
(935.68, 'Outgoing', '2021-12-26', 10),
(980.07, 'Incoming', '2021-12-05', 7),
(1087.88, 'Incoming', '2021-12-12', 4),
(697.55, 'Incoming', '2021-12-29', 2),
(36.17, 'Incoming', '2021-12-13', 6),
(408.71, 'Incoming', '2021-12-01', 10),
(1287.65, 'Outgoing', '2021-12-03', 10),
(1198.02, 'Incoming', '2021-12-10', 25),
(51.27, 'Incoming', '2021-12-09', 21),
(1283.72, 'Incoming', '2021-12-12', 13),
(1485.54, 'Incoming', '2021-12-13', 18),
(1330.82, 'Incoming', '2021-12-18', 4),
(1052.96, 'Outgoing', '2021-12-13', 17),
(1472.73, 'Incoming', '2021-12-23', 11),
(1490.52, 'Incoming', '2021-12-27', 15),
(539.64, 'Incoming', '2021-12-18', 2),
(1006.15, 'Outgoing', '2021-12-04', 7),
(1480.98, 'Outgoing', '2021-12-27', 13),
(25.46, 'Incoming', '2021-12-21', 15),
(1476.95, 'Outgoing', '2021-12-14', 17),
(360.26, 'Outgoing', '2021-12-23', 18),
(1253.77, 'Incoming', '2021-12-30', 23),
(1028.52, 'Outgoing', '2021-12-10', 6),
(450.08, 'Outgoing', '2021-12-21', 16),
(870.03, 'Outgoing', '2021-12-02', 18),
(552.66, 'Outgoing', '2021-12-04', 2),
(805.34, 'Outgoing', '2021-12-22', 2),
(282.42, 'Incoming', '2021-12-03', 11),
(1460.52, 'Outgoing', '2021-12-15', 20),
(550.55, 'Incoming', '2021-12-06', 7),
(833.59, 'Incoming', '2021-12-24', 20),
(939.51, 'Incoming', '2021-12-31', 17),
(126.40, 'Outgoing', '2021-12-12', 13),
(989.17, 'Outgoing', '2021-12-07', 21),
(588.50, 'Incoming', '2021-12-02', 16),
(1040.24, 'Incoming', '2021-12-29', 10),
(628.66, 'Incoming', '2021-12-30', 21),
(1345.37, 'Outgoing', '2021-12-13', 16),
(1360.95, 'Outgoing', '2021-12-23', 11),
(353.33, 'Outgoing', '2021-12-31', 25),
(877.96, 'Outgoing', '2021-12-21', 24),
(747.24, 'Incoming', '2021-12-31', 17),
(341.88, 'Incoming', '2021-12-21', 21),
(392.99, 'Incoming', '2021-12-25', 20),
(1419.72, 'Incoming', '2021-12-07', 25),
(1218.91, 'Outgoing', '2021-12-19', 13),
(440.87, 'Incoming', '2021-12-23', 3),
(278.13, 'Incoming', '2021-12-31', 1),
(470.29, 'Outgoing', '2021-12-07', 13),
(1304.45, 'Incoming', '2021-12-17', 21),
(597.53, 'Incoming', '2021-12-19', 22),
(1218.66, 'Outgoing', '2021-12-20', 25),
(687.10, 'Incoming', '2021-12-12', 7),
(1206.39, 'Outgoing', '2021-12-27', 16),
(407.85, 'Outgoing', '2021-12-01', 23),
(328.63, 'Incoming', '2021-12-30', 10),
(1019.48, 'Outgoing', '2021-12-26', 25),
(1251.57, 'Outgoing', '2021-12-20', 2),
(167.52, 'Incoming', '2021-12-03', 24),
(138.66, 'Incoming', '2021-12-24', 17),
(1390.82, 'Outgoing', '2021-12-22', 5),
(1009.88, 'Outgoing', '2021-12-02', 20),
(1210.34, 'Incoming', '2021-12-20', 8),
(331.66, 'Outgoing', '2021-12-25', 16),
(963.76, 'Incoming', '2021-12-30', 5),
(173.92, 'Outgoing', '2021-12-30', 15),
(512.14, 'Outgoing', '2021-12-03', 8),
(602.40, 'Incoming', '2021-12-26', 5),
(610.74, 'Outgoing', '2021-12-05', 4),
(1263.84, 'Incoming', '2021-12-12', 17),
(573.47, 'Outgoing', '2021-12-15', 8),
(166.13, 'Outgoing', '2021-12-27', 9),
(1112.03, 'Outgoing', '2021-12-06', 18),
(1127.29, 'Outgoing', '2021-12-31', 20),
(56.52, 'Outgoing', '2021-12-16', 19),
(923.01, 'Incoming', '2021-12-10', 10),
(825.06, 'Outgoing', '2021-12-12', 2),
(557.57, 'Incoming', '2021-12-05', 2),
(536.09, 'Incoming', '2021-12-24', 13),
(604.20, 'Outgoing', '2021-12-03', 25),
(753.72, 'Outgoing', '2021-12-29', 12),
(786.58, 'Incoming', '2021-12-28', 4),
(710.10, 'Outgoing', '2021-12-16', 21),
(173.18, 'Incoming', '2021-12-28', 22),
(80.66, 'Outgoing', '2021-12-19', 15),
(483.13, 'Outgoing', '2021-12-10', 17),
(508.75, 'Outgoing', '2021-12-06', 8),
(328.15, 'Incoming', '2021-12-01', 20),
(8.49, 'Outgoing', '2021-12-05', 17),
(1275.79, 'Outgoing', '2021-12-07', 10),
(942.36, 'Incoming', '2021-12-14', 1),
(462.96, 'Outgoing', '2021-12-04', 8),
(1266.78, 'Incoming', '2021-12-21', 21),
(1396.58, 'Incoming', '2021-12-18', 2),
(160.78, 'Outgoing', '2021-12-16', 24),
(463.52, 'Incoming', '2021-12-15', 10),
(41.65, 'Incoming', '2021-12-09', 10),
(757.36, 'Outgoing', '2021-12-26', 3),
(1254.72, 'Outgoing', '2021-12-19', 10),
(750.21, 'Incoming', '2021-12-23', 20),
(216.51, 'Incoming', '2021-12-22', 9),
(1140.35, 'Incoming', '2021-12-29', 24),
(1190.79, 'Outgoing', '2021-12-02', 19),
(292.67, 'Incoming', '2021-12-16', 23),
(394.16, 'Outgoing', '2021-12-04', 15),
(1106.84, 'Outgoing', '2021-12-18', 23),
(152.90, 'Incoming', '2021-12-24', 14),
(416.90, 'Outgoing', '2021-12-21', 1),
(127.94, 'Outgoing', '2021-12-09', 2),
(1182.02, 'Incoming', '2021-12-03', 24),
(1077.65, 'Outgoing', '2021-12-18', 10),
(867.98, 'Incoming', '2021-12-27', 13),
(1212.36, 'Outgoing', '2021-12-01', 25),
(1429.04, 'Outgoing', '2021-12-07', 12),
(855.48, 'Outgoing', '2021-12-18', 16),
(717.59, 'Outgoing', '2021-12-27', 18),
(804.42, 'Outgoing', '2021-12-31', 25),
(1351.01, 'Outgoing', '2021-12-03', 13),
(196.32, 'Incoming', '2021-12-30', 22),
(1008.10, 'Outgoing', '2021-12-22', 16),
(1206.14, 'Outgoing', '2021-12-24', 14),
(887.80, 'Outgoing', '2021-12-12', 1),
(1092.75, 'Incoming', '2021-12-11', 22),
(956.79, 'Outgoing', '2021-12-19', 21),
(1189.33, 'Outgoing', '2021-12-06', 12),
(960.36, 'Incoming', '2021-12-16', 8),
(1151.70, 'Incoming', '2021-12-08', 21),
(392.24, 'Incoming', '2021-12-06', 17),
(1148.05, 'Outgoing', '2021-12-06', 23),
(239.14, 'Incoming', '2021-12-19', 25),
(540.23, 'Incoming', '2021-12-30', 3),
(1161.47, 'Outgoing', '2021-12-07', 3),
(863.52, 'Outgoing', '2021-12-09', 15),
(193.26, 'Outgoing', '2021-12-13', 17),
(1411.75, 'Incoming', '2021-12-05', 3),
(54.28, 'Outgoing', '2021-12-03', 15),
(207.83, 'Incoming', '2021-12-18', 19),
(5.13, 'Incoming', '2021-12-30', 3),
(471.98, 'Incoming', '2021-12-31', 22),
(318.37, 'Outgoing', '2021-12-31', 22),
(499.64, 'Outgoing', '2021-12-25', 16),
(366.96, 'Outgoing', '2021-12-05', 7),
(496.78, 'Outgoing', '2021-12-09', 1),
(611.16, 'Incoming', '2021-12-26', 15),
(1450.54, 'Outgoing', '2021-12-18', 15),
(791.28, 'Incoming', '2021-12-08', 13),
(299.77, 'Incoming', '2021-12-12', 17),
(119.51, 'Outgoing', '2021-12-02', 6),
(480.40, 'Incoming', '2021-12-26', 5),
(90.79, 'Incoming', '2021-12-19', 8),
(744.15, 'Incoming', '2021-12-26', 8),
(425.88, 'Incoming', '2021-12-12', 10),
(47.30, 'Outgoing', '2021-12-29', 13),
(40.49, 'Outgoing', '2021-12-20', 16),
(611.85, 'Incoming', '2021-12-08', 4),
(190.54, 'Outgoing', '2021-12-15', 19),
(100.96, 'Outgoing', '2021-12-08', 24),
(808.12, 'Incoming', '2021-12-24', 5),
(624.28, 'Incoming', '2021-12-03', 25),
(586.55, 'Incoming', '2021-12-05', 3),
(911.65, 'Outgoing', '2021-12-11', 25),
(1346.48, 'Incoming', '2021-12-13', 13),
(502.06, 'Outgoing', '2021-12-07', 24),
(1249.17, 'Incoming', '2021-12-13', 1),
(323.89, 'Incoming', '2021-12-03', 2),
(251.66, 'Incoming', '2021-12-01', 4),
(257.93, 'Incoming', '2021-12-20', 25),
(272.98, 'Incoming', '2021-12-29', 13),
(1095.63, 'Incoming', '2021-12-05', 21),
(339.20, 'Outgoing', '2021-12-01', 4),
(801.08, 'Incoming', '2021-12-26', 15),
(819.46, 'Incoming', '2021-12-06', 11),
(542.40, 'Incoming', '2021-12-22', 10),
(1465.92, 'Outgoing', '2021-12-25', 7),
(1286.34, 'Outgoing', '2021-12-19', 2),
(503.00, 'Outgoing', '2021-12-24', 18),
(1046.12, 'Incoming', '2021-12-18', 11),
(370.31, 'Incoming', '2021-12-15', 24),
(886.32, 'Outgoing', '2021-12-28', 5),
(717.89, 'Outgoing', '2021-12-08', 3),
(900.48, 'Outgoing', '2021-12-23', 9),
(149.02, 'Outgoing', '2021-12-02', 19),
(865.53, 'Outgoing', '2021-12-26', 12),
(458.11, 'Incoming', '2021-12-16', 22),
(1138.37, 'Outgoing', '2021-12-14', 18),
(592.33, 'Outgoing', '2021-12-14', 19),
(878.33, 'Outgoing', '2021-12-09', 24),
(1149.98, 'Outgoing', '2021-12-02', 23),
(1060.40, 'Outgoing', '2021-12-01', 14),
(159.58, 'Outgoing', '2021-12-16', 3),
(828.89, 'Outgoing', '2021-12-01', 21),
(964.69, 'Outgoing', '2021-12-25', 5),
(454.54, 'Outgoing', '2021-12-24', 21),
(356.08, 'Outgoing', '2021-12-26', 20),
(658.89, 'Incoming', '2021-12-23', 23),
(1005.04, 'Outgoing', '2021-12-10', 24),
(645.68, 'Outgoing', '2021-12-07', 8),
(744.52, 'Outgoing', '2021-12-02', 18),
(409.63, 'Outgoing', '2021-12-05', 14),
(382.88, 'Incoming', '2021-12-17', 22),
(20.49, 'Outgoing', '2021-12-22', 6),
(1164.17, 'Outgoing', '2021-12-13', 22),
(1084.03, 'Incoming', '2021-12-25', 6),
(616.24, 'Outgoing', '2021-12-06', 6),
(850.25, 'Incoming', '2021-12-29', 2),
(1296.31, 'Outgoing', '2021-12-21', 11),
(1493.72, 'Outgoing', '2021-12-11', 3),
(114.46, 'Incoming', '2021-12-24', 24),
(368.80, 'Incoming', '2021-12-06', 6),
(1.53, 'Outgoing', '2021-12-11', 16),
(273.79, 'Outgoing', '2021-12-25', 22),
(120.54, 'Incoming', '2021-12-31', 22),
(839.82, 'Outgoing', '2021-12-14', 23),
(512.42, 'Incoming', '2021-12-14', 14),
(913.25, 'Outgoing', '2021-12-22', 6),
(1301.00, 'Outgoing', '2021-12-29', 6),
(824.97, 'Incoming', '2021-12-16', 13),
(993.56, 'Incoming', '2021-12-11', 21),
(968.55, 'Incoming', '2021-12-26', 21),
(1341.88, 'Incoming', '2021-12-10', 13),
(235.48, 'Incoming', '2021-12-25', 2),
(791.68, 'Incoming', '2021-12-18', 12),
(1088.68, 'Incoming', '2021-12-10', 8),
(955.58, 'Incoming', '2021-12-25', 24),
(385.37, 'Outgoing', '2021-12-23', 23),
(538.09, 'Outgoing', '2021-12-29', 11),
(1129.73, 'Incoming', '2021-12-25', 9),
(1256.96, 'Incoming', '2021-12-26', 12),
(165.82, 'Outgoing', '2021-12-02', 22),
(947.71, 'Outgoing', '2021-12-08', 17),
(97.59, 'Outgoing', '2021-12-23', 10),
(38.04, 'Outgoing', '2021-12-20', 5),
(110.65, 'Outgoing', '2021-12-11', 17),
(70.62, 'Outgoing', '2021-12-24', 7),
(98.13, 'Outgoing', '2021-12-25', 23),
(22.79, 'Outgoing', '2021-12-23', 24),
(22.80, 'Outgoing', '2021-12-31', 2),
(296.44, 'Outgoing', '2021-12-24', 20),
(8.71, 'Outgoing', '2021-12-16', 1),
(37.87, 'Outgoing', '2021-12-22', 16),
(46.59, 'Outgoing', '2021-12-30', 15),
(46.61, 'Outgoing', '2021-12-20', 21);

-- OPTIONAL PROCEDURES --

-- New Customer Procedure --
DELIMITER //
CREATE PROCEDURE NewCustomer(FirstName varchar(150), LastName varchar(150), DateOfBirth date, HomeAddress varchar(255), Phone varchar(255))
BEGIN
INSERT INTO customer (FirstName, LastName, DateOfBirth, HomeAddress, Phone)
VALUES (FirstName, LastName, DateOfBirth, HomeAddress, Phone);
END //

-- New Account Procedure --
DELIMITER //
CREATE PROCEDURE NewAccount(Balance float(13, 2), SortCode varchar(8), CustomerID int(11))
BEGIN
INSERT INTO account (Balance, SortCode, CustomerID)
VALUES (Balance, SortCode, CustomerID);
END //

-- New Loan Procedure --
DELIMITER //
CREATE PROCEDURE NewLoan(LoanAmount float(13, 2), CustomerID int(11), AccountID int(11), PaymentRate float(13, 2), NumberOfMonthlyPayments int(3), FirstPaymentDate date, MonthlyDueDate varchar(10))
BEGIN
INSERT INTO loan (LoanAmount, CustomerID, AccountID, PaymentRate, NumberOfMonthlyPayments, FirstPaymentDate, MonthlyDueDate)
VALUES (LoanAmount, CustomerID, AccountID, PaymentRate, NumberOfMonthlyPayments, FirstPaymentDate, MonthlyDueDate);
END //

-- New Transaction Procedure --
DELIMITER //
CREATE PROCEDURE NewTransaction(TransactionAmount float(13, 2), TransactionType varchar(30), TransactionDate date, Reference varchar(50), AccountID int(11))
BEGIN
INSERT INTO Transaction (TransactionAmount, TransactionType, TransactionDate, Reference, AccountID)
VALUES (TransactionAmount, TransactionType, TransactionDate, Reference, AccountID);
UPDATE account
SET Balance = Balance + TransactionAmount
WHERE AccountID = AccountID;
END //

-- MANDATORY PROCEDURES --

-- Due Payment Procedure --
DELIMITER //
CREATE PROCEDURE DuePayment()
BEGIN
SELECT customer.FirstName, customer.LastName, account.AccountID, loan.MonthlyDueDate
FROM ((account
INNER JOIN loan ON account.AccountID = loan.AccountID)
INNER JOIN customer ON account.CustomerID = customer.CustomerID)
WHERE MonthlyDueDate IN ('1st', '2nd', '3rd', '4th', '5th', '6th', '7th')
ORDER BY customer.LastName;
END //

-- Recent Transaction Procedure --
DELIMITER //
CREATE PROCEDURE RecentProcedure()
BEGIN
SELECT customer.FirstName, customer.LastName, account.AccountID, account.SortCode, transaction.TransactionAmount, transaction.TransactionType, transaction.TransactionDate
FROM ((account
INNER JOIN customer ON customer.CustomerID = account.CustomerID)
INNER JOIN transaction ON transaction.AccountID = account.AccountID)
WHERE TransactionDate IN ('2021-12-27', '2021-12-28', '2021-12-29', '2021-12-30', '2021-12-31')
ORDER BY TransactionDate;
END //

-- Balance Procedure --
DELIMITER //
CREATE PROCEDURE BalanceCheck()
BEGIN
SELECT customer.FirstName, customer.LastName, account.AccountID, account.Balance 
FROM (account
INNER JOIN customer ON customer.CustomerID = account.CustomerID)
WHERE Balance > 5000
ORDER BY customer.LastName;
END //

-- Total Outstanding Procedure --
DELIMITER //
CREATE PROCEDURE TOCheck()
BEGIN
SELECT (
    (SELECT SUM(Balance) FROM account)
    -
    (SELECT SUM(TransactionAmount) FROM transaction WHERE TransactionType = 'Outgoing')
) AS Total_Outstanding;
END //